import{_ as i,c as a,e as n,o as h}from"./app-DWByWgeb.js";const l={};function k(e,s){return h(),a("div",null,s[0]||(s[0]=[n(`<div class="hint-container note"><p class="hint-container-title">对 Web 应用进行压力测试，一般使用 Apache 提供的压力测试工具 <a href="https://httpd.apache.org/docs/2.4/programs/ab.html" target="_blank" rel="noopener noreferrer">ab</a> 。</p><p>ab 的功能非常强大，可以发起各种 HTTP 请求，并且支持设置 并发数 。测试完毕后，ab 还对测量数据进行统计分析，最终生成一份非常详细的测试报告。</p><p>那么，ab 工具如何使用呢？本文将演示 ab 若干用法，以此抛砖引玉。</p></div><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>Web 应用一般部署在 Linux 服务器上，因此主流 Linux 发行版软件包都提供了 Apache 工具 ab 。以 Ubuntu 为例，我们只需按照 apache2-utils 包，即可得到 ab 命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apache2-utils</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装完毕后，我们可以通过 -V 选项查看 ab 的版本，确认它已经就绪：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -V</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1706008</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="帮助文档" tabindex="-1"><a class="header-anchor" href="#帮助文档"><span>帮助文档</span></a></h2><p>与大多数 Unix 命令一样，我们可以通过 -h 选项，查看 ab 命令的帮助文档：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Usage:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [options] </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">http</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">://</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hostname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/path</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Options</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> are:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> perform</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> multiple</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> make</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timelimit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> max.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spend</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> benchmarking</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> implies</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timeout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> max.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wait</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> each</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> response</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    Default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 30</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> windowsize</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Size</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TCP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> send/receive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> buffer,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> address</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Address</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bind</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> when</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> making</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> outgoing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> connections</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> postfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     File</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> POST.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Remember</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> also</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> putfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      File</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PUT.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Remember</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> also</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> content-type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Content-type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> POST/PUT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eg.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &#39;application/x-www-form-urlencoded&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    Default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text/plain</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> verbosity</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    How</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> much</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> troubleshooting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> info</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> print</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -w</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Print</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> results</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tables</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> instead</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GET</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   String</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   String</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -z</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   String</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> td</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> th</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cookie,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eg.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Apache=1234</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (repeatable)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -H</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arbitrary</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> line,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eg.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Accept-Encoding: gzip</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    Inserted</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> after</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lines.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (repeatable)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -A</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Basic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> WWW</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Authentication,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    are</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> colon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> separated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> username</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> password.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -P</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Basic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Proxy</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Authentication,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    are</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> colon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> separated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> username</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> password.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -X</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> proxy:port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Proxyserver</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -V</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Print</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -k</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HTTP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KeepAlive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> feature</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> percentiles</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> confidence</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> estimators</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> warnings.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -q</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> progress</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> when</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> doing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> more</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> than</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 150</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Accept</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> variable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> length</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (use </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dynamic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -g</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filename</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Output</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> collected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gnuplot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> format</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filename</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Output</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CSV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> percentages</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Don</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">t exit on socket receive errors.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -m method       Method name</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -h              Display usage information (this message)</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -Z ciphersuite  Specify SSL/TLS cipher suite (See openssl ciphers)</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -f protocol     Specify SSL/TLS protocol</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    (TLS1, TLS1.1, TLS1.2 or ALL)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>文档告诉我们，只需将 压测地址 传给 ab 并指定一些 参数选项 即可发起测试。常用的选项包括：</p><ul><li><code>-n</code> ，指定压测 总请求数 ；</li><li><code>-c</code> ，指定 并发数 ，即同时发起的请求个数；</li><li><code>-s</code> ，请求 超时时间 ，默认是 30 秒；</li><li><code>etc</code></li></ul><h2 id="报告解读" tabindex="-1"><a class="header-anchor" href="#报告解读"><span>报告解读</span></a></h2><p>我在本地跑了一个用 Python 编写的 Web 服务，现在拿它来练练手：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8080/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1706008</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 4000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 6000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Finished</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        Python/3.8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hostname:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      100</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5.972</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      10000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1700000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       190000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1674.43</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       59.722</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0.597</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          277.98</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Times</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mean[+/-sd]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> median</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   1.5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      15</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Processing:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    43</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   58</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     57</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      89</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Waiting:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       29</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   47</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   6.3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     47</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      85</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         43</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   60</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4.8</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     58</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      90</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Percentage</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> within</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">50%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     58</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">66%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     59</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">75%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     60</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">80%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     61</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">90%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     65</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">95%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     69</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">98%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     72</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">99%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     85</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">100%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     90</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (longest </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">request</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例子用 ab 对本地 Web 服务进行压力测试，压测总请求数 10000 ，并发数为 100 。</p><p>我们重点关注 ab 完成测试后生成的报告，首先是 统计数据 ：</p><ul><li>Time taken for tests ，测试 总耗时 ，为 5.972 秒；</li><li>Complete requests ， 完成请求数 ，为 10000 ，也就是百分之百完成；</li><li>Failed requests ， 失败请求数 ；</li><li>Total transferred ，传输 数据总量 ， 170 万字节， 1.6MB 左右；</li><li>HTML transferred ，传输 HTML 总量，也就是 HTTP 响应 Body 部分数据量；</li><li>Requests per second ，每秒请求数 ；</li><li>Time per request ， 请求平均耗时 ，第一个是真实耗时，不考虑并发数；</li><li>Time per request ，第二个考虑并发数，刚好是第一个除以并发数；</li><li>Transfer rate ，传输速率，277.98KB 每秒；</li></ul><p>紧接着的是针对请求的 分阶段耗时统计 ，ab 将请求分为以下几个阶段：</p><ul><li>Connect ，连接阶段；</li><li>Processing ，处理阶段；</li><li>Waiting ，等待阶段；</li><li>Total ，合计；</li></ul><p>对于每个阶段耗时， ab 分别统计了 最小值 、 平均值 、中位数 以及 最大值 。</p><p>最后是请求 耗时分布 ，报告表明：</p><ul><li>50% 的请求可以在 58 毫秒内完成；</li><li>66% 的请求可以在 59 毫秒内完成；</li><li>76% 的请求可以在 60 毫秒内完成；</li><li>……</li></ul><h2 id="典型用法" tabindex="-1"><a class="header-anchor" href="#典型用法"><span>典型用法</span></a></h2><h3 id="post发送表单" tabindex="-1"><a class="header-anchor" href="#post发送表单"><span>POST发送表单</span></a></h3><p>将需要发送的表单数据保存在一个文件中，假设文件名为 form.txt ，格式如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">foo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&amp;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>指定 -p 选项让 ab 发送该文件；指定 -T 选项让 ab 设置正确的 Content-Type 头部：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> form.txt</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/x-www-form-urlencoded</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://127.0.0.1:8080/test/json</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="post发送json数据" tabindex="-1"><a class="header-anchor" href="#post发送json数据"><span>POST发送JSON数据</span></a></h3><p>将需要发送的 JSON 数据保存在一个文件中，假设文件名为 data.json ，格式如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;key&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">foo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    &quot;value&quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 123</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>指定 -p 选项让 ab 发送该文件；指定 -T 选项让 ab 设置正确的 Content-Type 头部：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data.json</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/json</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://127.0.0.1:8080/test/json</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,33)]))}const p=i(l,[["render",k]]),d=JSON.parse('{"path":"/linux/ad/","title":"ad","lang":"zh-CN","frontmatter":{"title":"ad","createTime":"2025/07/07 15:26:01","permalink":"/linux/ad/","description":"对 Web 应用进行压力测试，一般使用 Apache 提供的压力测试工具 ab 。 ab 的功能非常强大，可以发起各种 HTTP 请求，并且支持设置 并发数 。测试完毕后，ab 还对测量数据进行统计分析，最终生成一份非常详细的测试报告。 那么，ab 工具如何使用呢？本文将演示 ab 若干用法，以此抛砖引玉。 安装 Web 应用一般部署在 Linux 服...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ad\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-29T16:03:14.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://docs.sreio.com/linux/ad/"}],["meta",{"property":"og:site_name","content":"Sreio Docs"}],["meta",{"property":"og:title","content":"ad"}],["meta",{"property":"og:description","content":"对 Web 应用进行压力测试，一般使用 Apache 提供的压力测试工具 ab 。 ab 的功能非常强大，可以发起各种 HTTP 请求，并且支持设置 并发数 。测试完毕后，ab 还对测量数据进行统计分析，最终生成一份非常详细的测试报告。 那么，ab 工具如何使用呢？本文将演示 ab 若干用法，以此抛砖引玉。 安装 Web 应用一般部署在 Linux 服..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-29T16:03:14.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-29T16:03:14.000Z"}]]},"readingTime":{"minutes":4.61,"words":1383},"git":{"createdTime":1751873723000,"updatedTime":1767024194000,"contributors":[{"name":"sreio","username":"sreio","email":"ingwei@163.com","commits":3,"avatar":"https://avatars.githubusercontent.com/sreio?v=4","url":"https://github.com/sreio"}],"changelog":[{"hash":"6dd596b6752ea1c49be57e00b1b0c941c0324a5d","time":1767024194000,"email":"ingwei@163.com","author":"sreio","message":"feat: Add new documentation across Go, PHP, Docker, Linux, Database, Middleware, and Fundamentals, while removing some old images and files."},{"hash":"309568ac808a0e32f2a30faf8785a5bb75211f52","time":1751875794000,"email":"ingwei@163.com","author":"sreio","message":"docker"},{"hash":"fd3086d2a0dda0e5854876712429ec751f3157ea","time":1751873723000,"email":"ingwei@163.com","author":"sreio","message":"tools"}]},"autoDesc":true,"filePathRelative":"devops/linux/4.常用工具/1.ad.md","headers":[]}');export{p as comp,d as data};
