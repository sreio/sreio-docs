import{_ as s,c as e,e as a,o as t}from"./app-DDsjqNbb.js";const h={};function n(l,i){return t(),e("div",null,i[0]||(i[0]=[a('<div class="hint-container note"><p class="hint-container-title"><a href="http://man7.org/linux/man-pages/man1/tcpdump.1.html" target="_blank" rel="noopener noreferrer">tcpdump</a> 是一个 网络抓包 工具，用于嗅探经过主机的网络报文，排查问题时非常有用。 本文介绍 tcpdump 的 基本用法 ，并提供大量 典型示例 。</p></div><h2 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法"><span>基本用法</span></a></h2><p>抓取经过 enp0s3 网卡 80 端口的报文：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enp0s3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中， -n 表示不将地址转化成名字，这个选项在网络工具中很常见， ip 、 ping 、 ss 等命令也有。 -i 选项指定所嗅探的 网络设备 ； port 80 是一个 表达式 ( expression )，用于过滤报文，表示只输出端口为 80 的报文。</p><blockquote><p>网络工具命令一般通过 DNS 反解将 IP 地址转化成域名输出展示。 DNS 查询有一定耗时，特别是记录查询失败时，因此命令输出可能会有明显延迟。</p><p>例如，运行 ping 命令时， ICMP 回显答复报文已经收到，而命令却还没输出。 这种卡顿现象只需指定 -n 选项即可解决。</p></blockquote><h2 id="典型例子" tabindex="-1"><a class="header-anchor" href="#典型例子"><span>典型例子</span></a></h2><h3 id="嗅探环回流量-i-指定环回设备-lo" tabindex="-1"><a class="header-anchor" href="#嗅探环回流量-i-指定环回设备-lo"><span>嗅探环回流量， -i 指定环回设备 lo ：</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="嗅探所有网络流量-i-指定任意网络设备-为特殊关键字-any" tabindex="-1"><a class="header-anchor" href="#嗅探所有网络流量-i-指定任意网络设备-为特殊关键字-any"><span>嗅探所有网络流量， -i 指定任意网络设备，为特殊关键字 any ：</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> any</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="通过表达式过滤-icmp-协议流量" tabindex="-1"><a class="header-anchor" href="#通过表达式过滤-icmp-协议流量"><span>通过表达式过滤 ICMP 协议流量：</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> any</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> icmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="通过表达式过滤给定主机-ip-地址-的流量" tabindex="-1"><a class="header-anchor" href="#通过表达式过滤给定主机-ip-地址-的流量"><span>通过表达式过滤给定主机( IP 地址)的流量：</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> any</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.0.1.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="过滤给定主机-80-端口的流量" tabindex="-1"><a class="header-anchor" href="#过滤给定主机-80-端口的流量"><span>过滤给定主机 80 端口的流量：</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> any</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10.0.1.2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 80</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="匹配-tcp-分组标志位-以-syn-为例" tabindex="-1"><a class="header-anchor" href="#匹配-tcp-分组标志位-以-syn-为例"><span>匹配 TCP 分组标志位，以 SYN 为例：</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tcpdump</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ni</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> any</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 443</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tcp[tcpflags] &amp; tcp-syn != 0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>',19)]))}const d=s(h,[["render",n]]),r=JSON.parse('{"path":"/linux/tcpdump/","title":"tcpdump","lang":"zh-CN","frontmatter":{"title":"tcpdump","createTime":"2025/07/07 15:24:33","permalink":"/linux/tcpdump/","description":"tcpdump 是一个 网络抓包 工具，用于嗅探经过主机的网络报文，排查问题时非常有用。 本文介绍 tcpdump 的 基本用法 ，并提供大量 典型示例 。 基本用法 抓取经过 enp0s3 网卡 80 端口的报文： 其中， -n 表示不将地址转化成名字，这个选项在网络工具中很常见， ip 、 ping 、 ss 等命令也有。 -i 选项指定所嗅探的 ...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"tcpdump\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-07T08:09:54.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://docs.sreio.com/linux/tcpdump/"}],["meta",{"property":"og:site_name","content":"Sreio Docs"}],["meta",{"property":"og:title","content":"tcpdump"}],["meta",{"property":"og:description","content":"tcpdump 是一个 网络抓包 工具，用于嗅探经过主机的网络报文，排查问题时非常有用。 本文介绍 tcpdump 的 基本用法 ，并提供大量 典型示例 。 基本用法 抓取经过 enp0s3 网卡 80 端口的报文： 其中， -n 表示不将地址转化成名字，这个选项在网络工具中很常见， ip 、 ping 、 ss 等命令也有。 -i 选项指定所嗅探的 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-07T08:09:54.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-07T08:09:54.000Z"}]]},"readingTime":{"minutes":1.33,"words":399},"git":{"createdTime":1751873723000,"updatedTime":1751875794000,"contributors":[{"name":"sreio","username":"sreio","email":"ingwei@163.com","commits":2,"avatar":"https://avatars.githubusercontent.com/sreio?v=4","url":"https://github.com/sreio"}],"changelog":[{"hash":"309568ac808a0e32f2a30faf8785a5bb75211f52","time":1751875794000,"email":"ingwei@163.com","author":"sreio","message":"docker"},{"hash":"fd3086d2a0dda0e5854876712429ec751f3157ea","time":1751873723000,"email":"ingwei@163.com","author":"sreio","message":"tools"}]},"autoDesc":true,"filePathRelative":"linux/5.常见命令总结/7.tcpdump.md","headers":[]}');export{d as comp,r as data};
