import{_ as t,c as p,e,a as r,w as n,r as d,o as g,b as s,d as a}from"./app-DDsjqNbb.js";const y={};function A(c,i){const k=d("Tabs");return g(),p("div",null,[i[6]||(i[6]=e('<h2 id="supervisor简介" tabindex="-1"><a class="header-anchor" href="#supervisor简介"><span>supervisor简介</span></a></h2><p><code>Supervisor</code> 是一个客户端/服务器系统，它允许其用户监视和控制类 <code>UNIX</code> 操作系统上的许多进程,用<code>Python</code>开发的一套通用的进程管理程序。它是通过<code>fork/exec</code>的方式把这些被管理的进程当作<code>supervisor</code>的子进程来启动，只要在<code>supervisor</code>的配置文件中，把要管理的进程的可执行文件的路径写进去，就可以进行管理。具体文档参考<a href="http://supervisord.org/" target="_blank" rel="noopener noreferrer">supervisord官网</a></p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2>',3)),r(k,{id:"9",data:[{id:"pip"},{id:"centos"},{id:"ubuntu/debian"}]},{title0:n(({value:l,isActive:h})=>i[0]||(i[0]=[a("pip")])),title1:n(({value:l,isActive:h})=>i[1]||(i[1]=[a("centos")])),title2:n(({value:l,isActive:h})=>i[2]||(i[2]=[a("ubuntu/debian")])),tab0:n(({value:l,isActive:h})=>i[3]||(i[3]=[s("p",null,[a("pip需要安装python环境 "),s("a",{href:"http://supervisord.org/introduction.html#platform-requirements",target:"_blank",rel:"noopener noreferrer"},"平台要求")],-1),s("p",null,"Supervisor 适用于 Python 3.4 或更高版本以及 Python 2.7 版本。",-1),s("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"pip"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," install"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," supervisor")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"#安装supervisor默认是没有生成配置文件的，生成配置文件")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"echo_supervisord_conf"),s("span",{style:{"--shiki-light":"#AB5959","--shiki-dark":"#CB7676"}}," >"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," /etc/supervisord.conf")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab1:n(({value:l,isActive:h})=>i[4]||(i[4]=[s("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"#使用yum安装supervisor")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"yum"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," install"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," supervisor")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"systemctl"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," enable"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," supervisord.service")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab2:n(({value:l,isActive:h})=>i[5]||(i[5]=[s("div",{class:"language-shell line-numbers-mode","data-highlighter":"shiki","data-ext":"shell",style:{"--shiki-light":"#393a34","--shiki-dark":"#dbd7caee","--shiki-light-bg":"#ffffff","--shiki-dark-bg":"#121212"}},[s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",{class:"language-shell"},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"# 使用apt安装supervisor")]),a(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"apt-get"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," install"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," supervisor")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),_:1}),i[7]||(i[7]=e(`<h2 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h2><h3 id="主配置文件-supervisord-conf" tabindex="-1"><a class="header-anchor" href="#主配置文件-supervisord-conf"><span>主配置文件： supervisord.conf</span></a></h3><p>可以通过运行<code>echo_supervisord_conf</code>获得。这个配置文件一般情况下不需要更改，除了最后的[include]部分，其余保持默认即可。</p><p><code>supervisor</code>的配置文件是<code>/etc/supervisord.conf</code>，默认配置文件是<code>/etc/supervisord.conf</code>，可以通过<code>-c</code>参数指定配置文件路径。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">unix_http_server</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/supervisor.sock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">UNIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> socket</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 文件，supervisorctl用XML_RPC和supervisord通信就是通过它进行，如果不设置的话，supervisorctl也就不能用了</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">chmod</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0700</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">socket文件的mode(权限</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)，默认是0700</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">chown</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nobody:nogroup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">       ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">socket文件的owner(属组</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)，格式：uid:gid</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">使用supervisorctl连接的时候，认证的用户（默认没有用户名）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">和上面的用户名对应的密码，可以直接使用明码，也可以使用SHA加密（默认没有密码）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">inet_http_server</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">         ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">侦听在TCP上的socket，Web</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Server和远程的supervisorctl都要用到它不设置的话，默认为不开启。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">127.0.0.1:9001</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是管理后台运行的IP和端口，侦听所有IP用:9001或*:9001。如果上面的[inet_http_server]开启了，就必须设置它。如果开放到公网，需要注意安全性</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">同上面的[unix_http_server]用户名配置一致</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">同上面的[unix_http_server]密码配置一致</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">supervisord</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个主要是定义supervisord这个服务端进程的一些参数的</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/supervisord.log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是supervisord这个主进程的日志路径，注意和子进程的日志没有关系。默认是</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $CWD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/supervisord.log，</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$CWD是当前目录</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">50MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">日志文件大小，默认50MB。超过50M的时候，会生成一个新的日志文件；如果设成0，表示不限制大小。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">           ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">日志文件保留备份数量默认10，设为0表示不备份</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">loglevel</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">info</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">日志级别，默认info，其它:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> critical,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> warn,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> info,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> debug,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> trace,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blather</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pidfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/supervisord.pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 文件</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">nodaemon</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">是否在前台启动，默认是false，即以</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 的方式启动</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">minfds</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以打开的文件描述符的最小值，默认</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 1024，低于这个值supervisor将不会启动。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">minprocs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">200</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以打开的进程数的最小值，默认200，低于这个值supervisor也将不会正常启动。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">umask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">022</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程创建文件的掩码,默认为022。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">chrism</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 这个参数可以设置一个非root用户，当我们以root用户启动supervisord之后。我这里面设置的这个用户，也可以对supervisord进行管理,默认情况是不设置。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">identifier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">supervisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">       ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数是supervisord的标识符，主要是给XML_RPC用的。当你有多个supervisor的时候，而且想调用XML_RPC统一管理，就需要为每个supervisor设置不同的标识符,默认是supervisord。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数是当supervisord作为守护进程运行的时候，设置这个参数的话，启动supervisord进程之前，会先切换到这个目录默认不设置。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">nocleanup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数当为false的时候，会在supervisord进程启动的时候，把以前子进程产生的日志文件(路径为AUTO的情况下</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)清除掉。有时候咱们想要看历史日志，当 然不想日志被清除了。所以可以设置为true，默认是false，有调试需求的同学可以设置为true。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">childlogdir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当子进程日志路径为AUTO(系统自动分配</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)的时候，子进程日志文件的存放路径。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">KEY</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">value</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">     ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是用来设置环境变量的，supervisord在linux中启动默认继承了linux环境变量，在这里可以设置supervisord进程特有的其他环境变量。supervisord启动子进程时，子进程会拷贝父进程的内存空间内容。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 所以设置的这些环境变量也会被子进程继承。默认为不设置。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">strip_ansi</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个选项如果设置为true，会清除子进程日志中的所有ANSI</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 序列。什么是ANSI序列呢？就是我们的</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">这些东西。默认为false。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">supervisorctl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个主要是针对supervisorctl的一些配置</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unix:///tmp/supervisor.sock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">通过UNIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> socket连接supervisord，路径与unix_http_server部分的file一致</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://127.0.0.1:9001</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 通过HTTP的方式连接supervisord</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">chris</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">用户名，默认空</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">密码，默认空。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">prompt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mysupervisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">         ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">输入用户名密码时候的提示，默认supervisor。</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                   </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">history_file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">~/.sc_history</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数和shell中的history类似，我们可以用上下键来查找前面执行过的命令默认是no</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file的。所以我们想要有这种功能，必须指定一个文件。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:xx</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">是被管理的进程配置参数，xx是进程的名称</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/opt/apache-tomcat-8.0.35/bin/catalina.sh</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">程序启动命令</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以带参数,如：/home/test.py</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hehe</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">有一点需要注意的是，我们的command只能是那种在终端运行的进程，不能是守护进程。这个想想也知道了，比如说command=service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> httpd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start。httpd这个进程被linux的service管理了，我们的supervisor再去启动这个命令，这已经不是严格意义的子进程了。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程运行前，会前切换到这个目录</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autostart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">在supervisord启动的时候也自动启动</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动10秒后没有异常退出，就表示进程正常启动了，默认为1秒。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autorestart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">          ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">程序退出后自动重启,可选值：[unexpected,true,false]，默认为unexpected，表示进程意外杀死后才重启</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 这个是设置子进程挂掉后自动重启的情况，如果为false的时候，无论什么情况下，都不会被重新启动，如果为unexpected，只有当进程的退出码不在下面的exitcodes里面定义的退出码的时候，才会被自动重启。当为true的时候，只要子进程挂掉，将会被无条件的重启。</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                               </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">exitcodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">注意和上面的的autorestart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=unexpected对应。exitcodes里面的定义的退出码是expected的。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopsignal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">QUIT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程停止信号，可以为TERM,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HUP,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> INT,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> QUIT,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KILL,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR2等信号。默认为TERM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 。当用设定的信号去干掉进程，退出码会被认为是expected。</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopwaitsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是当我们向子进程发送stopsignal信号后，到系统返回信息给supervisord，所等待的最大时间。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 超过这个时间，supervisord会向该子进程发送一个强制kill的信号。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 默认为10秒。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startretries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动失败自动重试次数，默认是3。当超过3次后，supervisor将把此进程的状态置为FAIL</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">用哪个用户启动进程，默认是root。如果supervisord是root启动，我们在这里设置这个非root用户，可以用来管理该program。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程启动优先级，默认999，值小的优先启动</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">redirect_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">把stderr重定向到stdout，默认false</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stdout日志文件大小，默认50MB</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stdout_logfile_backups</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stdout日志文件备份数，默认是10</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/opt/apache-tomcat-8.0.35/logs/catalina.out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程的stdout的日志路径，可以指定路径，AUTO，none等三个选项。设置为none的话，将没有日志产生。设置为AUTO的话，将随机找一个地方生成日志文件，而且当supervisord重新启动的时候，以前的日志文件会被清空。当</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">redirect_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true的时候，sterr也会写进这个日志文件。需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 会自动创建日志文件）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopasgroup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">         ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">默认为false,进程被杀死时，是否向这个进程组发送stop信号，包括子进程。主要用于，supervisord管理的子进程，这个子进程本身还有子进程。那么我们如果仅仅干掉supervisord的子进程的话，子进程的子进程有可能会变成孤儿进程。所以咱们可以设置可个选项，把整个该子进程的整个进程组都干掉。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 设置为true的话，一般killasgroup也会被设置为true。需要注意的是，该选项发送的是stop。默认为false。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">killasgroup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">信号默认为false，不过向进程组发送的是kill信号</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_capture_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个一样，和stdout_capture一样。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 默认为0，关闭状态</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_events_enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个也是一样，默认为false</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">       ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是该子进程的环境变量，和别的子进程是不共享的</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AUTO</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">group:thegroupname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">就是给programs(子进程</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)分组，划分到组里面的program。我们就不用一个一个去操作了，我们可以对组名进行统一的操作。 注意：program被划分到组里面之后，就相当于原来的配置从supervisor的配置文件里消失了。supervisor只会对组进行管理，而不再会对组里面的单个program进行管理了</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">programs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">progname1,progname2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">组成员，用逗号分开。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">优先级，相对于组和组之间说的。默认999。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">包含其它配置文件</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当我们要管理的进程很多的时候，都写在主配置文件就不太合适了，这个时候可以把配置信息写到多个文件中，然后include过来</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">include</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> .ini和.conf都支持</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> relative/directory/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.ini</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以指定一个或多个以.ini结束的配置文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="子进程配置文件" tabindex="-1"><a class="header-anchor" href="#子进程配置文件"><span>子进程配置文件</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">为必须填写项</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:应用名称</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:cat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">命令路径,如果使用python启动的程序应该为 python /home/test.py, </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">不建议放入/home/user/,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 对于非user用户一般情况下是不能访问</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/cat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当numprocs为1时,process_name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">program_name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当numprocs</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=2时,%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">program_name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)s_%(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">process_num</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)02d</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">process_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">program_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程数量</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">numprocs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">执行目录,若有/home/supervisor_test/test1.py</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">将directory设置成/home/supervisor_test</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">则command只需设置成python</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test1.py</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">否则command必须设置成绝对执行目录</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">掩码:---</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -w-</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -w-,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 转换后rwx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> r-x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> w-x</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">umask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">022</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">优先级,值越高,最后启动,最先被关闭,默认值999</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">如果是true,当supervisor启动时,程序将会自动启动</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autostart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">自动重启</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autorestart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动延时执行,默认1秒</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动尝试次数,默认3次</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startretries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当退出码是0,2时,执行重启,默认值0,2</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">exitcodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">停止信号,默认TERM</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">中断:INT(类似于Ctrl+C</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -INT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),退出后会将写文件或日志(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">推荐</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">终止:TERM(kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -TERM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">挂起:HUP(kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -HUP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),注意与Ctrl+Z/kill -stop pid不同</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">从容停止:QUIT(kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -QUIT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">KILL,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR2其他见命令</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,说明1</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopsignal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">TERM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopwaitsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">以root用户执行</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">root</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重定向</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">redirect_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a/path</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_capture_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a/path</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_capture_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">环境变量设置</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AUTO</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="supervisord-和-supervisorctl" tabindex="-1"><a class="header-anchor" href="#supervisord-和-supervisorctl"><span>supervisord 和 supervisorctl</span></a></h2><h3 id="supervisord" tabindex="-1"><a class="header-anchor" href="#supervisord"><span>supervisord</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p><code>supervisord 是主进程。</code></p><p>supervisord 是 supervisor 的服务端程序。</p><p>启动 supervisor 程序自身，启动 supervisor 管理的子进程，响应来自 clients 的请求，</p><p>重启闪退或异常退出的子进程，把子进程的 stderr 或 stdout 记录到日志文件中，生成和处理 Event。</p></div><p>通过<code>supervisord -h</code>可以查看帮助说明。示例：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-c/--configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-n/--nodaemon</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">运行在前台（调试用）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-v/--version</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">打印版本信息</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-u/--user</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USER</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">以指定用户（或用户ID）运行</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-m/--umask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UMASK</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定子进程的umask，默认是022</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-l/--logfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定日志文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-e/--loglevel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LEVEL</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定日志级别</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="supervisorctl" tabindex="-1"><a class="header-anchor" href="#supervisorctl"><span>supervisorctl</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p><code>supervisorctl 是客户端程序，用于向supervisord发起命令。</code></p><p>如果说 supervisord 是 supervisor 的服务端程序，那么 supervisorctl 就是 client 端程序了。</p><p>supervisorctl 有一个类型 shell 的命令行界面，可以利用它来查看子进程状态，启动 / 停止 / 重启子进程，</p><p>获取 running 子进程的列表等等。最重要的是，supervisorctl 不仅可以连接到本机上的 supervisord，</p><p>还可以连接到远程的 supervisord，当然在本机上面是通过 UNIX socket 连接的，远程是通过 TCP socket 连接的。</p><p>supervisorctl 和 supervisord 之间的通信，是通过 xml_rpc 完成的。</p></div><p>通过<code>supervisorctl -h</code>可以查看帮助说明。我们主要关心的是其<code>action</code>命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  help</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commands</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (type </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">help</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">topi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">):</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=====================================</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    exit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      open</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  reload</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   tail</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">avail</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  fg</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   remove</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  shutdown</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  update</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">clear</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  maintail</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  quit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  reread</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  signal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些命令对于控制子进程非常重要。示例:</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重新加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">update</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">将配置文件里新增的子进程加入进程组，如果设置了autostart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=true则会启动新新增的子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">status</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">查看所有进程状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">status</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">查看指定进程状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 启动所有子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 启动指定子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 重启所有子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">restart</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 重启指定子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 停止所有子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 停止指定子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reload</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重启supervisord</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 添加子进程到进程组</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reomve</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 从进程组移除子进程，需要先stop。注意：移除后，需要使用reread和update才能重新运行该进程</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>supervisord 有进程组(process group)的概念：只有子进程在进程组，才能被运行。</p><p><strong>supervisorctl也支持交互式命令行：</strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 27188,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uptime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0:05:09</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3.3.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">注： supervisord是主进程，supervisorctl是给守护进程发送命令的客户端工具。</p></div><h2 id="命令列表" tabindex="-1"><a class="header-anchor" href="#命令列表"><span>命令列表</span></a></h2><h3 id="查看安装的版本" tabindex="-1"><a class="header-anchor" href="#查看安装的版本"><span>查看安装的版本</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3.3.4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看supervisor的状态" tabindex="-1"><a class="header-anchor" href="#查看supervisor的状态"><span>查看supervisor的状态</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="指定主配置文件-则需要使用-c参数" tabindex="-1"><a class="header-anchor" href="#指定主配置文件-则需要使用-c参数"><span>指定主配置文件，则需要使用-c参数</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/supervisor/supervisord.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="重启-supervisor" tabindex="-1"><a class="header-anchor" href="#重启-supervisor"><span>重启 supervisor</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="启动-停止-查看名字为-blog-的-program" tabindex="-1"><a class="header-anchor" href="#启动-停止-查看名字为-blog-的-program"><span>启动/停止/查看名字为 blog 的 program</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blog</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blog</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动-停止-查看-所有的-program" tabindex="-1"><a class="header-anchor" href="#启动-停止-查看-所有的-program"><span>启动/停止/查看 所有的 program</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新读取配置" tabindex="-1"><a class="header-anchor" href="#重新读取配置"><span>重新读取配置</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reread</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="更新配置" tabindex="-1"><a class="header-anchor" href="#更新配置"><span>更新配置</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用示例" tabindex="-1"><a class="header-anchor" href="#使用示例"><span>使用示例</span></a></h2><p>我们先修改<code>supervisord.conf</code>最后的[include]部分配置：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">include</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/supervisor/conf.d/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>这样就可以支持子配置文件，而不用改动主配置文件。</p><p>我们以简单的 <code>/tmp/echo_time.sh</code> 为例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">while</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> do</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> \`</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">date</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +%Y-%m-%d,%H:%m:%s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\`</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    sleep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>/etc/supervisor/conf.d/</code>新增子进程配置文件 <code>echo_time.conf</code>：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:echo_time</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sh</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> /tmp/echo_time.sh</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> relative</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> priority</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">999</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autostart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autorestart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> retstart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unexpected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> quit</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> secs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> prog</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> must</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stay</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> running</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (def. </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startretries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> max</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # of serial start failures (default 3)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">exitcodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> &#39;expected&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> codes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopsignal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">QUIT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> signal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> used</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kill</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">TERM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopwaitsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> max</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> num</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> secs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wait</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> before</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SIGKILL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">root</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setuid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UNIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> account</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> program</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">log_stdout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">log_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> true</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> program</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stderr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (def </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/echo_time.log</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> max</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # logfile bytes b4 rotation (default 50MB)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">          ;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # of logfile backups (default 10)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> stdout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 日志文件大小，默认</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">     ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> stdout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 日志文件备份数</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/echo_time.stdout.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后启动程序：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reread</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>这两个命令分别代表重新读取配置、更新子进程组。执行update后输出：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_time:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> added</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这样刚才添加的echo_time脚本就常驻运行起来了。可以通过日志查看运行情况：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/echo_time.stdout.log</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024-02-22,14:12:1545459550</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024-02-22,14:12:1545459552</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024-02-22,14:12:1545459554</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用<code>supervisorctl status</code>查看子进程运行情况：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  status</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28206,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uptime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0:00:11</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,55))])}const u=t(y,[["render",A]]),o=JSON.parse('{"path":"/linux/supervisor/","title":"supervisor","lang":"zh-CN","frontmatter":{"title":"supervisor","createTime":"2025/07/07 15:26:43","permalink":"/linux/supervisor/","description":"supervisor简介 Supervisor 是一个客户端/服务器系统，它允许其用户监视和控制类 UNIX 操作系统上的许多进程,用Python开发的一套通用的进程管理程序。它是通过fork/exec的方式把这些被管理的进程当作supervisor的子进程来启动，只要在supervisor的配置文件中，把要管理的进程的可执行文件的路径写进去，就可以进...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"supervisor\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-14T03:14:18.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://docs.sreio.com/linux/supervisor/"}],["meta",{"property":"og:site_name","content":"Sreio Docs"}],["meta",{"property":"og:title","content":"supervisor"}],["meta",{"property":"og:description","content":"supervisor简介 Supervisor 是一个客户端/服务器系统，它允许其用户监视和控制类 UNIX 操作系统上的许多进程,用Python开发的一套通用的进程管理程序。它是通过fork/exec的方式把这些被管理的进程当作supervisor的子进程来启动，只要在supervisor的配置文件中，把要管理的进程的可执行文件的路径写进去，就可以进..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-14T03:14:18.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-14T03:14:18.000Z"}]]},"readingTime":{"minutes":13.28,"words":3983},"git":{"createdTime":1751873723000,"updatedTime":1752462858000,"contributors":[{"name":"sreio","username":"sreio","email":"ingwei@163.com","commits":3,"avatar":"https://avatars.githubusercontent.com/sreio?v=4","url":"https://github.com/sreio"}],"changelog":[{"hash":"392e0717075550911bee8967562578d34bf94c89","time":1752462858000,"email":"ingwei@163.com","author":"sreio","message":"updated: fixed tip"},{"hash":"309568ac808a0e32f2a30faf8785a5bb75211f52","time":1751875794000,"email":"ingwei@163.com","author":"sreio","message":"docker"},{"hash":"fd3086d2a0dda0e5854876712429ec751f3157ea","time":1751873723000,"email":"ingwei@163.com","author":"sreio","message":"tools"}]},"autoDesc":true,"filePathRelative":"linux/4.常用工具/2.supervisor.md","headers":[]}');export{u as comp,o as data};
