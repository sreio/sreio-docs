import{_ as h,c as k,b as i,e as t,a as e,w as n,r as d,o as p,d as l}from"./app-DDsjqNbb.js";const r="/assets/2-1-D5koi5ZI.png",c={},g={class:"table-of-contents"};function A(y,s){const a=d("router-link");return p(),k("div",null,[i("nav",g,[i("ul",null,[i("li",null,[e(a,{to:"#centos7-离线安装docker"},{default:n(()=>s[0]||(s[0]=[l("Centos7 离线安装Docker")])),_:1,__:[0]}),i("ul",null,[i("li",null,[e(a,{to:"#yum本地文件安装-推荐"},{default:n(()=>s[1]||(s[1]=[l("YUM本地文件安装（推荐）")])),_:1,__:[1]})]),i("li",null,[e(a,{to:"#yum-本地源服务器搭建安装docker"},{default:n(()=>s[2]||(s[2]=[l("YUM 本地源服务器搭建安装Docker")])),_:1,__:[2]})])])])])]),s[3]||(s[3]=t('<p>生产环境中一般都是没有公网资源的，本文介绍如何在生产服务器上离线部署<code>Docker</code></p><p>括号内的字母表示该操作需要在哪些服务器上执行</p><figure><img src="'+r+`" alt="2-1" tabindex="0" loading="lazy" width="1282" height="1072"><figcaption>2-1</figcaption></figure><h2 id="centos7-离线安装docker" tabindex="-1"><a class="header-anchor" href="#centos7-离线安装docker"><span>Centos7 离线安装Docker</span></a></h2><h3 id="yum本地文件安装-推荐" tabindex="-1"><a class="header-anchor" href="#yum本地文件安装-推荐"><span>YUM本地文件安装（推荐）</span></a></h3><p>推荐这种方式，是因为在生产环境种一般会选定某个指定的文档软件版本使用。</p><h4 id="查询可用的软件版本-a" tabindex="-1"><a class="header-anchor" href="#查询可用的软件版本-a"><span>查询可用的软件版本(A)</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#下载清华的镜像源文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.repos.d/docker-ce.repo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sed</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.repos.d/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --showduplicates</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sort</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirror</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> speeds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cached</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hostfile</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> plugins:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fastestmirror</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.8-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.7-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.6-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.5-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.4-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.3-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.2-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-ce.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            3:19.03.1-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                     docker-ce-stable</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">....</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="下载到指定文件夹-a" tabindex="-1"><a class="header-anchor" href="#下载到指定文件夹-a"><span>下载到指定文件夹(A)</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --downloadonly</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --downloaddir=/tmp/docker-19.03</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-19.03.8-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-cli-19.03.8-3.el7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Dependencies</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Resolved</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">====================================================================================================================================================================================</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                          Arch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                  Version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                         Repository</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                             Size</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">====================================================================================================================================================================================</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Installing:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> docker-ce</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                        x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                3:19.03.8-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                 docker</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                                 25</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Installing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dependencies:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> container-selinux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                noarch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                2:2.107-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                   extras</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                                 39</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> k</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> containerd.io</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                    x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                1.2.13-3.1.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                  docker</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                                 23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> docker-ce-cli</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                    x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                1:19.03.8-3.el7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                 docker</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                                 40</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> M</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transaction</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Summary</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">====================================================================================================================================================================================</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Install</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Package</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (+3 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Dependent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> download</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 87</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Installed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> size:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 363</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> M</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Background</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> downloading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> then</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exiting:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1/4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> container-selinux-2.107-3.el7.noarch.rpm</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                                                                                                              |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  39</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  00:00:00</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2/4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containerd.io-1.2.13-3.1.el7.x86_64.rpm</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                                                                                                               |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  00:00:00</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3/4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-19.03.8-3.el7.x86_64.rpm</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                                                                                                                    |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  25</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  00:00:00</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4/4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-cli-19.03.8-3.el7.x86_64.rpm</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">                                                                                                                |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  40</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  00:00:00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">                                                                                                                                               118</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MB/s</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  87</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MB</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  00:00:00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">exiting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> because</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Download Only</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> specified</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="复制到目标服务器之后进入文件夹安装-c-n" tabindex="-1"><a class="header-anchor" href="#复制到目标服务器之后进入文件夹安装-c-n"><span>复制到目标服务器之后进入文件夹安装(C-N)</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="锁定软件版本-c-n" tabindex="-1"><a class="header-anchor" href="#锁定软件版本-c-n"><span>锁定软件版本(C-N)</span></a></h4><h5 id="下载锁定版本软件" tabindex="-1"><a class="header-anchor" href="#下载锁定版本软件"><span>下载锁定版本软件</span></a></h5><p>可参考下文的网络源搭建</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum-plugin-versionlock</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="锁定软件版本" tabindex="-1"><a class="header-anchor" href="#锁定软件版本"><span>锁定软件版本</span></a></h5><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="查看锁定列表" tabindex="-1"><a class="header-anchor" href="#查看锁定列表"><span>查看锁定列表</span></a></h5><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> plugins:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fastestmirror,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3:docker-ce-18.09.9-3.el7.*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="锁定后无法再更新" tabindex="-1"><a class="header-anchor" href="#锁定后无法再更新"><span>锁定后无法再更新</span></a></h5><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> plugins:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fastestmirror,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loading</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mirror</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> speeds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cached</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hostfile</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Excluding</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> due</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (use </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">yum versionlock status</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> it</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 3:docker-ce-18.09.9-3.el7.x86_64</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> installed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> latest</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Nothing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> do</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="解锁指定软件" tabindex="-1"><a class="header-anchor" href="#解锁指定软件"><span>解锁指定软件</span></a></h5><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Loaded</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> plugins:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fastestmirror,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Deleting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 3:docker-ce-18.09.9-3.el7.</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> deleted:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="解锁所有软件" tabindex="-1"><a class="header-anchor" href="#解锁所有软件"><span>解锁所有软件</span></a></h5><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> versionlock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> delete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="yum-本地源服务器搭建安装docker" tabindex="-1"><a class="header-anchor" href="#yum-本地源服务器搭建安装docker"><span>YUM 本地源服务器搭建安装Docker</span></a></h3><h4 id="挂载-iso-镜像搭建本地-file-源-ab" tabindex="-1"><a class="header-anchor" href="#挂载-iso-镜像搭建本地-file-源-ab"><span>挂载 ISO 镜像搭建本地 File 源（AB）</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 删除其他网络源</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.repo.d/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 挂载光盘或者iso镜像</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/cdrom</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加本地源</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/yum.repos.d/local_files.repo</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[Local_Files]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name=Local_Files</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">baseurl=file:///mnt</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">enable=1</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gpgcheck=0</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gpgkey=file:///mnt/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 测试刚才的本地源,安装createrepo软件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clean</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> createrepo</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="根据本地文件搭建base网络源-b" tabindex="-1"><a class="header-anchor" href="#根据本地文件搭建base网络源-b"><span>根据本地文件搭建BASE网络源（B）</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 安装apache 服务器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> httpd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 挂载光盘</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/cdrom</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 新建centos目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/www/html/base</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 复制光盘内的文件到刚才新建的目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/Packages/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/www/html/base/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createrepo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  /var/www/html/centos/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> httpd</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> httpd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="下载docker-ce-镜像仓库-a" tabindex="-1"><a class="header-anchor" href="#下载docker-ce-镜像仓库-a"><span>下载Docker-CE 镜像仓库（A）</span></a></h4><p>在有网络的服务器上下载Docker-ce镜像</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载清华的镜像源文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.repos.d/docker-ce.repo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sed</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.repos.d/docker-ce.repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 新建 docker-ce目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/docker-ce/</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 把镜像源同步到镜像文件中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reposync</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-stable</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/docker-ce/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="创建仓库索引-b" tabindex="-1"><a class="header-anchor" href="#创建仓库索引-b"><span>创建仓库索引（B）</span></a></h4><p>把下载的 docker-ce 文件夹复制到离线的服务器</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 把docker-ce 文件夹复制到/var/www/html/docker-ce</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重建索引</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">createrepo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  /var/www/html/docker-ce/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="yum-客户端设置-c-n" tabindex="-1"><a class="header-anchor" href="#yum-客户端设置-c-n"><span>YUM 客户端设置（C...N）</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/yum.repo.d/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/etc/yum.repos.d/local_files.repo</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[local_base]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name=local_base</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"># 改成B服务器地址</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">baseurl=http://x.x.x.x/base</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">enable=1</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gpgcheck=0</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">proxy=_none_</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[docker_ce]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name=docker_ce</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"># 改成B服务器地址</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">baseurl=http://x.x.x.x/base</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">enable=1</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gpgcheck=0</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">proxy=_none_</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="docker-安装-c-n" tabindex="-1"><a class="header-anchor" href="#docker-安装-c-n"><span>Docker 安装（C...N）</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> makecache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fast</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker-ce-cli</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containerd.io</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,48))])}const v=h(c,[["render",A]]),u=JSON.parse('{"path":"/linux/Linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/","title":"Linux离线安装","lang":"zh-CN","frontmatter":{"title":"Linux离线安装","createTime":"2025/07/07 15:42:43","permalink":"/linux/Linux离线安装/","description":"生产环境中一般都是没有公网资源的，本文介绍如何在生产服务器上离线部署Docker 括号内的字母表示该操作需要在哪些服务器上执行 2-12-1 Centos7 离线安装Docker YUM本地文件安装（推荐） 推荐这种方式，是因为在生产环境种一般会选定某个指定的文档软件版本使用。 查询可用的软件版本(A) 下载到指定文件夹(A) 复制到目标服务器之后进入...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Linux离线安装\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-07-07T08:09:54.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://docs.sreio.com/linux/Linux%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/"}],["meta",{"property":"og:site_name","content":"Sreio Docs"}],["meta",{"property":"og:title","content":"Linux离线安装"}],["meta",{"property":"og:description","content":"生产环境中一般都是没有公网资源的，本文介绍如何在生产服务器上离线部署Docker 括号内的字母表示该操作需要在哪些服务器上执行 2-12-1 Centos7 离线安装Docker YUM本地文件安装（推荐） 推荐这种方式，是因为在生产环境种一般会选定某个指定的文档软件版本使用。 查询可用的软件版本(A) 下载到指定文件夹(A) 复制到目标服务器之后进入..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-07-07T08:09:54.000Z"}],["meta",{"property":"article:modified_time","content":"2025-07-07T08:09:54.000Z"}]]},"readingTime":{"minutes":3.21,"words":963},"git":{"createdTime":1751875794000,"updatedTime":1751875794000,"contributors":[{"name":"sreio","username":"sreio","email":"ingwei@163.com","commits":1,"avatar":"https://avatars.githubusercontent.com/sreio?v=4","url":"https://github.com/sreio"}],"changelog":[{"hash":"309568ac808a0e32f2a30faf8785a5bb75211f52","time":1751875794000,"email":"ingwei@163.com","author":"sreio","message":"docker"}]},"autoDesc":true,"filePathRelative":"linux/7.Docker-从入门到实践/3.安装Docker/4.Linux离线安装.md","headers":[]}');export{v as comp,u as data};
