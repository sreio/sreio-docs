<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.23" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.155" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"supervisor","image":[""],"dateModified":"2025-12-29T16:03:14.000Z","author":[]}</script><meta property="og:url" content="https://docs.sreio.com/linux/supervisor/"><meta property="og:site_name" content="Sreio Docs"><meta property="og:title" content="supervisor"><meta property="og:description" content="supervisor简介 Supervisor 是一个客户端/服务器系统，它允许其用户监视和控制类 UNIX 操作系统上的许多进程,用Python开发的一套通用的进程管理程序。它是通过fork/exec的方式把这些被管理的进程当作supervisor的子进程来启动，只要在supervisor的配置文件中，把要管理的进程的可执行文件的路径写进去，就可以进..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-12-29T16:03:14.000Z"><meta property="article:modified_time" content="2025-12-29T16:03:14.000Z"><link rel="icon" type="image/png" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6715279698150024" crossorigin="anonymous"></script><title>supervisor | Sreio Docs</title><meta name="description" content="supervisor简介 Supervisor 是一个客户端/服务器系统，它允许其用户监视和控制类 UNIX 操作系统上的许多进程,用Python开发的一套通用的进程管理程序。它是通过fork/exec的方式把这些被管理的进程当作supervisor的子进程来启动，只要在supervisor的配置文件中，把要管理的进程的可执行文件的路径写进去，就可以进..."><link rel="preload" href="/assets/style-BXtE0-vj.css" as="style"><link rel="stylesheet" href="/assets/style-BXtE0-vj.css"><link rel="modulepreload" href="/assets/app-DWByWgeb.js"><link rel="modulepreload" href="/assets/index.html-AHUDQuz0.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-d90a7a26><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-d90a7a26 data-v-e98a6132><div class="vp-navbar" vp-navbar data-v-e98a6132 data-v-2c31ea5e><div class="wrapper" data-v-2c31ea5e><div class="container" data-v-2c31ea5e><div class="title" data-v-2c31ea5e><div class="vp-navbar-title has-sidebar" data-v-2c31ea5e data-v-1a4f50af><a class="vp-link link no-icon title" href="/" data-v-1a4f50af><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/favicon.ico" alt data-v-480e858a><!--]--><!--[--><img class="vp-image light logo" style="" src="/favicon.ico" alt data-v-480e858a><!--]--><!--]--><!--]--><span data-v-1a4f50af>Sreio Docs</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2c31ea5e><div class="content-body" data-v-2c31ea5e><!--[--><!--]--><div class="vp-navbar-search search" data-v-2c31ea5e><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2c31ea5e data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>首页</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>编程语言</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/golang/" data-v-1ff1855f><!--[--><!----> Golang <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/php/" data-v-1ff1855f><!--[--><!----> PHP <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>数据库</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/mysql/" data-v-1ff1855f><!--[--><!----> MySQL <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/redis/" data-v-1ff1855f><!--[--><!----> Redis <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/mongodb/" data-v-1ff1855f><!--[--><!----> MongoDB <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/clickhouse/" data-v-1ff1855f><!--[--><!----> ClickHouse <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/etcd/" data-v-1ff1855f><!--[--><!----> Etcd <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>DevOps</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/docker/" data-v-1ff1855f><!--[--><!----> Docker <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/k8s/" data-v-1ff1855f><!--[--><!----> Kubernetes <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/linux/" data-v-1ff1855f><!--[--><!----> Linux <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/nginx/" data-v-1ff1855f><!--[--><!----> Nginx <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/ELK/" data-v-1ff1855f><!--[--><!----> ELK <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/git/" data-v-1ff1855f><!--[--><!----> Git <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/gitlab/" data-v-1ff1855f><!--[--><!----> GitLab <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>中间件</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/queue/" data-v-1ff1855f><!--[--><!----> 消息队列 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>基础知识</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/brain/" data-v-1ff1855f><!--[--><!----> 数据结构与算法 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/network/" data-v-1ff1855f><!--[--><!----> 网络协议 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>更多</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/ai/" data-v-1ff1855f><!--[--><!----> AI <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/interview/" data-v-1ff1855f><!--[--><!----> 面试宝典 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/it/" data-v-1ff1855f><!--[--><!----> IT 名词 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/cpwp/" data-v-1ff1855f><!--[--><!----> 程序员发音 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/vpn/" data-v-1ff1855f><!--[--><!----> VPN <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/%E9%A9%BE%E7%85%A7%E8%80%83%E8%AF%95/" data-v-1ff1855f><!--[--><!----> 驾照考试 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/sites/" data-v-1ff1855f><!--[--><!----> 网站导航 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-2c31ea5e data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-2c31ea5e data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/sreio/sreio-docs" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-2c31ea5e data-v-652282fd data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-86530b6c><span class="vpi-more-horizontal icon" data-v-86530b6c></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/sreio/sreio-docs" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2c31ea5e data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-2c31ea5e><div class="divider-line" data-v-2c31ea5e></div></div></div><!----></header><div class="vp-local-nav reached-top" data-v-d90a7a26 data-v-3944d8e8><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-4114a62c><button data-v-4114a62c>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-d90a7a26 data-v-95211354><div class="curtain" data-v-95211354></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-95211354><span id="sidebar-aria-label" class="visually-hidden" data-v-95211354> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-473fd05b data-v-12048f0f><div class="item" role="button" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><h2 class="text" data-v-12048f0f><span data-v-12048f0f>常用工具</span><!----></h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/ad/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ad</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/supervisor/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>supervisor</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/ncdu/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ncdu</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><div class="no-transition group" data-v-473fd05b><section class="vp-sidebar-item sidebar-item level-0 collapsible is-link" data-v-473fd05b data-v-12048f0f><div class="item" tabindex="0" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/" data-v-12048f0f><!--[--><h2 class="text" data-v-12048f0f><span data-v-12048f0f>常见命令总结</span><!----></h2><!--]--><!----></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-12048f0f><span class="vpi-chevron-right caret-icon" data-v-12048f0f></span></div></div><div data-v-12048f0f data-v-12048f0f><div class="items" data-v-12048f0f><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/man/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>man</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/top/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>top</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/curl/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>curl</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/ip/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ip</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/nc/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>nc</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/ifconfig/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>ifconfig</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/tcpdump/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>tcpdump</span><!----></p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-12048f0f data-v-12048f0f><div class="item" data-v-12048f0f><div class="indicator" data-v-12048f0f></div><!----><a class="vp-link link link" href="/linux/iperf/" data-v-12048f0f><!--[--><p class="text" data-v-12048f0f><span data-v-12048f0f>iperf</span><!----></p><!--]--><!----></a><!----></div><!----></div><!--]--></div></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-d90a7a26 data-v-b2beaca7><div class="vp-doc-container has-sidebar has-aside" data-v-b2beaca7 data-v-23f6ad98><!--[--><!--]--><div class="container" data-v-23f6ad98><div class="aside" vp-outline data-v-23f6ad98><div class="aside-curtain" data-v-23f6ad98></div><div class="aside-container" data-v-23f6ad98><div class="aside-content" data-v-23f6ad98><div class="vp-doc-aside" data-v-23f6ad98 data-v-5976474c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5976474c data-v-aa56eba0><div class="content" data-v-aa56eba0><div class="outline-marker" data-v-aa56eba0></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-aa56eba0><span data-v-aa56eba0>此页内容</span><span class="vpi-print icon" data-v-aa56eba0></span></div><ul class="root" data-v-aa56eba0 data-v-3e6b023c><!--[--><!--]--></ul></div></nav><!--[--><!--[--><!--[--><!--[--><div class="aside-nav-wrapper" data-v-d90a7a26 data-v-45e94c4e><a class="vp-link link no-icon link" href="https://github.com/sreio/sreio-docs" target="_blank" rel="noreferrer" data-v-45e94c4e><!--[--><span class="vpi-github-star" data-v-45e94c4e></span><span class="link-text" data-v-45e94c4e>在 GitHub 上 Star</span><span class="vpi-arrow-right" data-v-45e94c4e></span><!--]--><!----></a><a class="vp-link link no-icon link" href="https://github.com/sreio/sreio-docs/issues/new/choose" target="_blank" rel="noreferrer" data-v-45e94c4e><!--[--><span class="vpi-github-issue" data-v-45e94c4e></span><span class="link-text" data-v-45e94c4e>遇到问题？</span><span class="vpi-arrow-right" data-v-45e94c4e></span><!--]--><!----></a></div><!--]--><!--]--><!--]--><!--]--><div class="spacer" data-v-5976474c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-23f6ad98><div class="content-container" data-v-23f6ad98><!--[--><!--]--><main class="main" data-v-23f6ad98><nav class="vp-breadcrumb" data-v-23f6ad98 data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="首页" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><span class="vp-link breadcrumb" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->常用工具<!--]--><!----></span><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="常用工具" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb current" href="/linux/supervisor/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->supervisor<!--]--><!----></a><!----><meta property="name" content="supervisor" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-27be53cb>supervisor <!----></h1><div class="vp-doc-meta" data-v-27be53cb><!--[--><!--]--><p class="reading-time" data-v-27be53cb><span class="vpi-books icon" data-v-27be53cb></span><span data-v-27be53cb>约 3983 字</span><span data-v-27be53cb>大约 13 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-27be53cb><span class="vpi-clock icon" data-v-27be53cb></span><span data-v-27be53cb>2025-07-07</span></p></div><!--]--><!--[--><!--]--><div class="_linux_supervisor_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-23f6ad98><!--[--><!--]--><div data-v-23f6ad98><h2 id="supervisor简介" tabindex="-1"><a class="header-anchor" href="#supervisor简介"><span>supervisor简介</span></a></h2><p><code>Supervisor</code> 是一个客户端/服务器系统，它允许其用户监视和控制类 <code>UNIX</code> 操作系统上的许多进程,用<code>Python</code>开发的一套通用的进程管理程序。它是通过<code>fork/exec</code>的方式把这些被管理的进程当作<code>supervisor</code>的子进程来启动，只要在<code>supervisor</code>的配置文件中，把要管理的进程的可执行文件的路径写进去，就可以进行管理。具体文档参考<a href="http://supervisord.org/" target="_blank" rel="noopener noreferrer">supervisord官网</a></p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><!--[--><button class="active vp-tab-nav" type="button" role="tab" aria-controls="tab-9-0" aria-selected="true"><!--[-->pip<!--]--></button><button class="vp-tab-nav" type="button" role="tab" aria-controls="tab-9-1" aria-selected="false"><!--[-->centos<!--]--></button><button class="vp-tab-nav" type="button" role="tab" aria-controls="tab-9-2" aria-selected="false"><!--[-->ubuntu/debian<!--]--></button><!--]--></div><!--[--><div id="tab-9-0" class="active vp-tab" role="tabpanel" aria-expanded="true"><div class="vp-tab-title"><!--[-->pip<!--]--></div><!--[--><p>pip需要安装python环境 <a href="http://supervisord.org/introduction.html#platform-requirements" target="_blank" rel="noopener noreferrer">平台要求</a></p><p>Supervisor 适用于 Python 3.4 或更高版本以及 Python 2.7 版本。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisor</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#安装supervisor默认是没有生成配置文件的，生成配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_supervisord_conf</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/supervisord.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div id="tab-9-1" class="vp-tab" role="tabpanel" aria-expanded="false"><div class="vp-tab-title"><!--[-->centos<!--]--></div><!--[--><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#使用yum安装supervisor</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">yum</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisor</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div id="tab-9-2" class="vp-tab" role="tabpanel" aria-expanded="false"><div class="vp-tab-title"><!--[-->ubuntu/debian<!--]--></div><!--[--><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用apt安装supervisor</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisor</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h2><h3 id="主配置文件-supervisord-conf" tabindex="-1"><a class="header-anchor" href="#主配置文件-supervisord-conf"><span>主配置文件： supervisord.conf</span></a></h3><p>可以通过运行<code>echo_supervisord_conf</code>获得。这个配置文件一般情况下不需要更改，除了最后的[include]部分，其余保持默认即可。</p><p><code>supervisor</code>的配置文件是<code>/etc/supervisord.conf</code>，默认配置文件是<code>/etc/supervisord.conf</code>，可以通过<code>-c</code>参数指定配置文件路径。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">unix_http_server</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/supervisor.sock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">UNIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> socket</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 文件，supervisorctl用XML_RPC和supervisord通信就是通过它进行，如果不设置的话，supervisorctl也就不能用了</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">chmod</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0700</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">socket文件的mode(权限</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)，默认是0700</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">chown</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nobody:nogroup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">       ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">socket文件的owner(属组</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)，格式：uid:gid</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">使用supervisorctl连接的时候，认证的用户（默认没有用户名）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">和上面的用户名对应的密码，可以直接使用明码，也可以使用SHA加密（默认没有密码）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">inet_http_server</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">         ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">侦听在TCP上的socket，Web</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Server和远程的supervisorctl都要用到它不设置的话，默认为不开启。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">127.0.0.1:9001</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是管理后台运行的IP和端口，侦听所有IP用:9001或*:9001。如果上面的[inet_http_server]开启了，就必须设置它。如果开放到公网，需要注意安全性</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">同上面的[unix_http_server]用户名配置一致</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">同上面的[unix_http_server]密码配置一致</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">supervisord</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个主要是定义supervisord这个服务端进程的一些参数的</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/supervisord.log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是supervisord这个主进程的日志路径，注意和子进程的日志没有关系。默认是</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $CWD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/supervisord.log，</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$CWD是当前目录</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">50MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">日志文件大小，默认50MB。超过50M的时候，会生成一个新的日志文件；如果设成0，表示不限制大小。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">           ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">日志文件保留备份数量默认10，设为0表示不备份</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">loglevel</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">info</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">日志级别，默认info，其它:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> critical,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> warn,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> info,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> debug,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> trace,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blather</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pidfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/supervisord.pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 文件</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">nodaemon</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">是否在前台启动，默认是false，即以</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> daemon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 的方式启动</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">minfds</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1024</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以打开的文件描述符的最小值，默认</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 1024，低于这个值supervisor将不会启动。</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">minprocs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">200</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以打开的进程数的最小值，默认200，低于这个值supervisor也将不会正常启动。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">umask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">022</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程创建文件的掩码,默认为022。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">chrism</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 这个参数可以设置一个非root用户，当我们以root用户启动supervisord之后。我这里面设置的这个用户，也可以对supervisord进行管理,默认情况是不设置。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">identifier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">supervisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">       ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数是supervisord的标识符，主要是给XML_RPC用的。当你有多个supervisor的时候，而且想调用XML_RPC统一管理，就需要为每个supervisor设置不同的标识符,默认是supervisord。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数是当supervisord作为守护进程运行的时候，设置这个参数的话，启动supervisord进程之前，会先切换到这个目录默认不设置。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">nocleanup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数当为false的时候，会在supervisord进程启动的时候，把以前子进程产生的日志文件(路径为AUTO的情况下</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)清除掉。有时候咱们想要看历史日志，当 然不想日志被清除了。所以可以设置为true，默认是false，有调试需求的同学可以设置为true。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">childlogdir</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当子进程日志路径为AUTO(系统自动分配</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)的时候，子进程日志文件的存放路径。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">KEY</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">value</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">     ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是用来设置环境变量的，supervisord在linux中启动默认继承了linux环境变量，在这里可以设置supervisord进程特有的其他环境变量。supervisord启动子进程时，子进程会拷贝父进程的内存空间内容。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 所以设置的这些环境变量也会被子进程继承。默认为不设置。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">strip_ansi</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个选项如果设置为true，会清除子进程日志中的所有ANSI</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 序列。什么是ANSI序列呢？就是我们的</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">这些东西。默认为false。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">supervisorctl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个主要是针对supervisorctl的一些配置</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">unix:///tmp/supervisor.sock</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">通过UNIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> socket连接supervisord，路径与unix_http_server部分的file一致</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">http://127.0.0.1:9001</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 通过HTTP的方式连接supervisord</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">username</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">chris</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">用户名，默认空</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">password</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">123</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">密码，默认空。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">prompt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mysupervisor</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">         ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">输入用户名密码时候的提示，默认supervisor。</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                   </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">history_file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">~/.sc_history</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个参数和shell中的history类似，我们可以用上下键来查找前面执行过的命令默认是no</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file的。所以我们想要有这种功能，必须指定一个文件。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:xx</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">是被管理的进程配置参数，xx是进程的名称</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/opt/apache-tomcat-8.0.35/bin/catalina.sh</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">程序启动命令</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以带参数,如：/home/test.py</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -a</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hehe</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">有一点需要注意的是，我们的command只能是那种在终端运行的进程，不能是守护进程。这个想想也知道了，比如说command=service</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> httpd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start。httpd这个进程被linux的service管理了，我们的supervisor再去启动这个命令，这已经不是严格意义的子进程了。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程运行前，会前切换到这个目录</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autostart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">在supervisord启动的时候也自动启动</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动10秒后没有异常退出，就表示进程正常启动了，默认为1秒。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autorestart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">          ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">程序退出后自动重启,可选值：[unexpected,true,false]，默认为unexpected，表示进程意外杀死后才重启</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 这个是设置子进程挂掉后自动重启的情况，如果为false的时候，无论什么情况下，都不会被重新启动，如果为unexpected，只有当进程的退出码不在下面的exitcodes里面定义的退出码的时候，才会被自动重启。当为true的时候，只要子进程挂掉，将会被无条件的重启。</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                               </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">exitcodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">注意和上面的的autorestart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=unexpected对应。exitcodes里面的定义的退出码是expected的。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopsignal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">QUIT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程停止信号，可以为TERM,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HUP,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> INT,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> QUIT,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KILL,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR2等信号。默认为TERM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 。当用设定的信号去干掉进程，退出码会被认为是expected。</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopwaitsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是当我们向子进程发送stopsignal信号后，到系统返回信息给supervisord，所等待的最大时间。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 超过这个时间，supervisord会向该子进程发送一个强制kill的信号。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 默认为10秒。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startretries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动失败自动重试次数，默认是3。当超过3次后，supervisor将把此进程的状态置为FAIL</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">tomcat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">用哪个用户启动进程，默认是root。如果supervisord是root启动，我们在这里设置这个非root用户，可以用来管理该program。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程启动优先级，默认999，值小的优先启动</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">redirect_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">把stderr重定向到stdout，默认false</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stdout日志文件大小，默认50MB</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stdout_logfile_backups</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stdout日志文件备份数，默认是10</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/opt/apache-tomcat-8.0.35/logs/catalina.out</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程的stdout的日志路径，可以指定路径，AUTO，none等三个选项。设置为none的话，将没有日志产生。设置为AUTO的话，将随机找一个地方生成日志文件，而且当supervisord重新启动的时候，以前的日志文件会被清空。当</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">redirect_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true的时候，sterr也会写进这个日志文件。需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 会自动创建日志文件）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopasgroup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">         ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">默认为false,进程被杀死时，是否向这个进程组发送stop信号，包括子进程。主要用于，supervisord管理的子进程，这个子进程本身还有子进程。那么我们如果仅仅干掉supervisord的子进程的话，子进程的子进程有可能会变成孤儿进程。所以咱们可以设置可个选项，把整个该子进程的整个进程组都干掉。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 设置为true的话，一般killasgroup也会被设置为true。需要注意的是，该选项发送的是stop。默认为false。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">killasgroup</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">信号默认为false，不过向进程组发送的是kill信号</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_capture_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个一样，和stdout_capture一样。</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 默认为0，关闭状态</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_events_enabled</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">   ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个也是一样，默认为false</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">       ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">这个是该子进程的环境变量，和别的子进程是不共享的</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AUTO</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">group:thegroupname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">就是给programs(子进程</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)分组，划分到组里面的program。我们就不用一个一个去操作了，我们可以对组名进行统一的操作。 注意：program被划分到组里面之后，就相当于原来的配置从supervisor的配置文件里消失了。supervisor只会对组进行管理，而不再会对组里面的单个program进行管理了</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">programs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">progname1,progname2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">组成员，用逗号分开。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">优先级，相对于组和组之间说的。默认999。</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">包含其它配置文件</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当我们要管理的进程很多的时候，都写在主配置文件就不太合适了，这个时候可以把配置信息写到多个文件中，然后include过来</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">include</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> .ini和.conf都支持</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> relative/directory/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.ini</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">可以指定一个或多个以.ini结束的配置文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="子进程配置文件" tabindex="-1"><a class="header-anchor" href="#子进程配置文件"><span>子进程配置文件</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">为必须填写项</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:应用名称</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:cat</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">命令路径,如果使用python启动的程序应该为 python /home/test.py, </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">不建议放入/home/user/,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 对于非user用户一般情况下是不能访问</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/bin/cat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当numprocs为1时,process_name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">program_name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当numprocs</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=2时,%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">program_name</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)s_%(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">process_num</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)02d</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">process_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">program_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">进程数量</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">numprocs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">执行目录,若有/home/supervisor_test/test1.py</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">将directory设置成/home/supervisor_test</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">则command只需设置成python</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test1.py</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">否则command必须设置成绝对执行目录</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">directory</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">掩码:---</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -w-</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -w-,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 转换后rwx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> r-x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> w-x</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">umask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">022</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">优先级,值越高,最后启动,最先被关闭,默认值999</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">如果是true,当supervisor启动时,程序将会自动启动</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autostart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">自动重启</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autorestart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动延时执行,默认1秒</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">启动尝试次数,默认3次</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startretries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">当退出码是0,2时,执行重启,默认值0,2</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">exitcodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">停止信号,默认TERM</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">中断:INT(类似于Ctrl+C</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -INT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),退出后会将写文件或日志(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">推荐</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">终止:TERM(kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -TERM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">挂起:HUP(kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -HUP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">),注意与Ctrl+Z/kill -stop pid不同</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">从容停止:QUIT(kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -QUIT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pid</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">KILL,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR1,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USR2其他见命令</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">kill</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,说明1</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopsignal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">TERM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopwaitsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">以root用户执行</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">root</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重定向</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">redirect_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a/path</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_capture_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/a/path</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stderr_capture_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">环境变量设置</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">B</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">serverurl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AUTO</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="supervisord-和-supervisorctl" tabindex="-1"><a class="header-anchor" href="#supervisord-和-supervisorctl"><span>supervisord 和 supervisorctl</span></a></h2><h3 id="supervisord" tabindex="-1"><a class="header-anchor" href="#supervisord"><span>supervisord</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p><code>supervisord 是主进程。</code></p><p>supervisord 是 supervisor 的服务端程序。</p><p>启动 supervisor 程序自身，启动 supervisor 管理的子进程，响应来自 clients 的请求，</p><p>重启闪退或异常退出的子进程，把子进程的 stderr 或 stdout 记录到日志文件中，生成和处理 Event。</p></div><p>通过<code>supervisord -h</code>可以查看帮助说明。示例：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-c/--configuration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-n/--nodaemon</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">运行在前台（调试用）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-v/--version</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">打印版本信息</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-u/--user</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> USER</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">以指定用户（或用户ID）运行</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-m/--umask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UMASK</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定子进程的umask，默认是022</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-l/--logfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定日志文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-e/--loglevel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> LEVEL</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">指定日志级别</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="supervisorctl" tabindex="-1"><a class="header-anchor" href="#supervisorctl"><span>supervisorctl</span></a></h3><div class="hint-container note"><p class="hint-container-title">注</p><p><code>supervisorctl 是客户端程序，用于向supervisord发起命令。</code></p><p>如果说 supervisord 是 supervisor 的服务端程序，那么 supervisorctl 就是 client 端程序了。</p><p>supervisorctl 有一个类型 shell 的命令行界面，可以利用它来查看子进程状态，启动 / 停止 / 重启子进程，</p><p>获取 running 子进程的列表等等。最重要的是，supervisorctl 不仅可以连接到本机上的 supervisord，</p><p>还可以连接到远程的 supervisord，当然在本机上面是通过 UNIX socket 连接的，远程是通过 TCP socket 连接的。</p><p>supervisorctl 和 supervisord 之间的通信，是通过 xml_rpc 完成的。</p></div><p>通过<code>supervisorctl -h</code>可以查看帮助说明。我们主要关心的是其<code>action</code>命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  help</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commands</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (type </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">help</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">topi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">c</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">):</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=====================================</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    exit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      open</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  reload</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   tail</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">avail</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  fg</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   remove</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  shutdown</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  update</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">clear</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  maintail</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  quit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  reread</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  signal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些命令对于控制子进程非常重要。示例:</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reread</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重新加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">update</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">将配置文件里新增的子进程加入进程组，如果设置了autostart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=true则会启动新新增的子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">status</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">查看所有进程状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">status</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">查看指定进程状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 启动所有子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">start</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 启动指定子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 重启所有子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">restart</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 重启指定子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 停止所有子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">stop</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 停止指定子进程</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reload</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">重启supervisord</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">add</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 添加子进程到进程组</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reomve</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nam</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 从进程组移除子进程，需要先stop。注意：移除后，需要使用reread和update才能重新运行该进程</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>supervisord 有进程组(process group)的概念：只有子进程在进程组，才能被运行。</p><p><strong>supervisorctl也支持交互式命令行：</strong></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 27188,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uptime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0:05:09</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt; </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3.3.4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">注： supervisord是主进程，supervisorctl是给守护进程发送命令的客户端工具。</p></div><h2 id="命令列表" tabindex="-1"><a class="header-anchor" href="#命令列表"><span>命令列表</span></a></h2><h3 id="查看安装的版本" tabindex="-1"><a class="header-anchor" href="#查看安装的版本"><span>查看安装的版本</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3.3.4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看supervisor的状态" tabindex="-1"><a class="header-anchor" href="#查看supervisor的状态"><span>查看supervisor的状态</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="指定主配置文件-则需要使用-c参数" tabindex="-1"><a class="header-anchor" href="#指定主配置文件-则需要使用-c参数"><span>指定主配置文件，则需要使用-c参数</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/supervisor/supervisord.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="重启-supervisor" tabindex="-1"><a class="header-anchor" href="#重启-supervisor"><span>重启 supervisor</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="启动-停止-查看名字为-blog-的-program" tabindex="-1"><a class="header-anchor" href="#启动-停止-查看名字为-blog-的-program"><span>启动/停止/查看名字为 blog 的 program</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blog</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blog</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> blog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动-停止-查看-所有的-program" tabindex="-1"><a class="header-anchor" href="#启动-停止-查看-所有的-program"><span>启动/停止/查看 所有的 program</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重新读取配置" tabindex="-1"><a class="header-anchor" href="#重新读取配置"><span>重新读取配置</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reread</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="更新配置" tabindex="-1"><a class="header-anchor" href="#更新配置"><span>更新配置</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用示例" tabindex="-1"><a class="header-anchor" href="#使用示例"><span>使用示例</span></a></h2><p>我们先修改<code>supervisord.conf</code>最后的[include]部分配置：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">include</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/supervisor/conf.d/</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>这样就可以支持子配置文件，而不用改动主配置文件。</p><p>我们以简单的 <code>/tmp/echo_time.sh</code> 为例：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">while</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> do</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> `</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">date</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +%Y-%m-%d,%H:%m:%s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">`</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    sleep</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>/etc/supervisor/conf.d/</code>新增子进程配置文件 <code>echo_time.conf</code>：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">program:echo_time</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">sh</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> /tmp/echo_time.sh</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">priority</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">999</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> relative</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> priority</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">999</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autostart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisord</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autorestart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">            ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> retstart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unexpected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> quit</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default: </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">true</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> secs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> prog</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> must</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stay</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> running</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (def. </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">startretries</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">              ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> max</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # of serial start failures (default 3)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">exitcodes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">               ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> &#39;expected&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> codes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0,2</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopsignal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">QUIT</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> signal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> used</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kill</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">TERM</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stopwaitsecs</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> max</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> num</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> secs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wait</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> before</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SIGKILL</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (default </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">10</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">root</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">                 ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setuid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UNIX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> account</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> program</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">log_stdout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">log_stderr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">             ;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> if</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> true</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> program</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stderr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (def </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">false</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/echo_time.log</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> max</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # logfile bytes b4 rotation (default 50MB)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">          ;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # of logfile backups (default 10)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_maxbytes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20MB</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> stdout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 日志文件大小，默认</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 50MB</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile_backups</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">     ;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> stdout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 日志文件备份数</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">stdout_logfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/tmp/echo_time.stdout.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后启动程序：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reread</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>这两个命令分别代表重新读取配置、更新子进程组。执行update后输出：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_time:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> added</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这样刚才添加的echo_time脚本就常驻运行起来了。可以通过日志查看运行情况：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /tmp/echo_time.stdout.log</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024-02-22,14:12:1545459550</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024-02-22,14:12:1545459552</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2024-02-22,14:12:1545459554</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用<code>supervisorctl status</code>查看子进程运行情况：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> supervisorctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  status</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">echo_time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        RUNNING</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   pid</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28206,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uptime</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0:00:11</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><h2 id="doc-contributors" tabindex="-1"><a href="#doc-contributors" class="header-anchor"><span>贡献者</span></a></h2><div class="vp-contributors"><a href="https://github.com/sreio" target="_blank" rel="noreferrer" class="vp-contributor"><img src="https://avatars.githubusercontent.com/sreio?v=4" alt class="vp-contributor-avatar"><span class="vp-contributor-name">sreio</span></a></div><!--]--><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>更新日志</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2025/12/29 16:03</span></div><div><span class="vp-changelog-menu-icon"></span><span>查看所有更新日志</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><a class="vp-changelog-hash" href="https://github.com/sreio/sreio-docs/commit/6dd596b6752ea1c49be57e00b1b0c941c0324a5d" target="_blank" rel="noreferrer"><code>6dd59</code></a><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">feat: Add new documentation across Go, PHP, Docker, Linux, Database, Middleware, and Fundamentals, while removing some old images and files.</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-12-29T16:03:14.000Z">2025/12/29</time></span></li><li class="vp-changelog-item-commit"><a class="vp-changelog-hash" href="https://github.com/sreio/sreio-docs/commit/392e0717075550911bee8967562578d34bf94c89" target="_blank" rel="noreferrer"><code>392e0</code></a><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">updated: fixed tip</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-07-14T03:14:18.000Z">2025/7/14</time></span></li><li class="vp-changelog-item-commit"><a class="vp-changelog-hash" href="https://github.com/sreio/sreio-docs/commit/309568ac808a0e32f2a30faf8785a5bb75211f52" target="_blank" rel="noreferrer"><code>30956</code></a><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">docker</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-07-07T08:09:54.000Z">2025/7/7</time></span></li><li class="vp-changelog-item-commit"><a class="vp-changelog-hash" href="https://github.com/sreio/sreio-docs/commit/fd3086d2a0dda0e5854876712429ec751f3157ea" target="_blank" rel="noreferrer"><code>fd308</code></a><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">tools</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-07-07T07:35:23.000Z">2025/7/7</time></span></li><!--]--></ul></div><!--]--><!----></div></main><footer class="vp-doc-footer" data-v-23f6ad98 data-v-fda6bbae><!--[--><!--]--><div class="edit-info" data-v-fda6bbae><div class="edit-link" data-v-fda6bbae><a class="vp-link link no-icon edit-link-button" href="https://github.com/sreio/sreio-docs/edit/main/docs/devops/linux/4.常用工具/2.supervisor.md" target="_blank" rel="noreferrer" data-v-fda6bbae><!--[--><span class="vpi-square-pen edit-link-icon" aria-label="edit icon" data-v-fda6bbae></span> 编辑此页<!--]--><!----></a></div><!----></div><!----><nav class="prev-next" data-v-fda6bbae><div class="pager" data-v-fda6bbae><a class="vp-link link pager-link prev" href="/linux/ad/" data-v-fda6bbae><!--[--><span class="desc" data-v-fda6bbae>上一页</span><span class="title" data-v-fda6bbae>ad</span><!--]--><!----></a></div><div class="pager" data-v-fda6bbae><a class="vp-link link pager-link next" href="/linux/ncdu/" data-v-fda6bbae><!--[--><span class="desc" data-v-fda6bbae>下一页</span><span class="title" data-v-fda6bbae>ncdu</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-d90a7a26 data-v-bcf8d9a6><span class="percent" data-allow-mismatch data-v-bcf8d9a6>0%</span><span class="show icon vpi-back-to-top" data-v-bcf8d9a6></span><svg aria-hidden="true" data-v-bcf8d9a6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-bcf8d9a6></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-d90a7a26 data-v-400675cf><!--[--><div class="container" data-v-400675cf><p class="message" data-v-400675cf>Sreio Docs </p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-DWByWgeb.js" defer></script></body></html>